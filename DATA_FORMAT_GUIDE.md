# 데이터 업로드 형식 가이드

## 1. 시공 데이터 (Construction Data) 형식

### Excel 컬럼 구조

| 카테고리 | 항목명 | 설명 | 년도 | 분기 | 월 | 지역 | 자재비 | 인건비 | 간접비 | 총액 | 평수 | 건물유형 | 시공사 | 비고 |
|---------|--------|------|------|------|-----|------|--------|--------|--------|------|------|----------|--------|------|
| 주방 | 씽크대 | 일반형 | 2024 | 1 | 1 | 서울 | 500000 | 300000 | 100000 | 900000 | 30 | 아파트 | ABC건설 | 최고급 자재 |
| 바닥 | 강화마루 | 12T | 2024 | 1 | 2 | 경기 | 800000 | 400000 | 150000 | 1350000 | 35 | 아파트 | | |

### 필수 컬럼
- **카테고리**: 항목의 대분류 (예: 주방, 바닥, 벽, 욕실 등)
- **항목명**: 구체적인 항목 이름 (예: 씽크대, 강화마루 등)
- **년도**: 2020~2030 사이의 숫자
- **총액**: 양수 금액

### 선택 컬럼
- 분기 (1~4)
- 월 (1~12)
- 지역
- 자재비, 인건비, 간접비
- 평수
- 건물유형
- 시공사
- 비고

### 금액 표기 방법
다음 형식 모두 지원:
- `1000000` (숫자)
- `1,000,000` (콤마 포함)
- `₩1,000,000` (원화 기호)
- `1000000원` (한글 단위)

---

## 2. 유통사 가격 데이터 (Distributor Price) 형식

### Excel 컬럼 구조

| 카테고리 | 항목명 | 유통사 | 브랜드 | 모델명 | 도매가 | 소매가 | 할인율 | 단위 | 년월 | 비고 |
|---------|--------|--------|--------|--------|--------|--------|--------|------|------|------|
| 주방 | 씽크대 | 한샘 | 한샘 | HS-2000 | 800000 | 1200000 | 10 | 개 | 2024-12 | 프리미엄 모델 |
| 바닥 | 강화마루 | 대우건설자재 | LG하우시스 | Z:IN | 45000 | 60000 | 15 | m² | 2025-01 | |

### 필수 컬럼
- **카테고리**: 항목의 대분류
- **항목명**: 구체적인 항목 이름
- **유통사**: 공급 업체명
- **년월**: `YYYY-MM` 또는 `YYYY/MM` 형식 (예: 2024-12)
- **도매가 또는 소매가**: 최소 하나는 필수

### 선택 컬럼
- 브랜드
- 모델명
- 할인율 (%)
- 단위
- 비고

### 년월 표기 방법
- `2024-12` (하이픈)
- `2024/12` (슬래시)
- 모두 지원됨

---

## 3. 샘플 데이터 예시

### 시공 데이터 예시 (construction_sample.xlsx)

```
카테고리	항목명	년도	총액	자재비	인건비	간접비	지역	평수	건물유형
주방	씽크대	2024	1200000	700000	400000	100000	서울	32	아파트
주방	후드	2024	450000	250000	150000	50000	서울	32	아파트
바닥	강화마루	2024	2500000	1500000	800000	200000	경기	35	빌라
바닥	타일	2024	1800000	1000000	650000	150000	인천	28	아파트
벽	벽지	2024	800000	400000	350000	50000	서울	32	아파트
욕실	세면대	2024	600000	350000	200000	50000	서울	32	아파트
```

### 유통사 가격 데이터 예시 (distributor_sample.xlsx)

```
카테고리	항목명	유통사	브랜드	모델명	도매가	소매가	단위	년월
주방	씽크대	한샘	한샘	HS-2000	800000	1200000	개	2024-12
주방	씽크대	대림바스	대림	DL-1500	650000	950000	개	2024-12
바닥	강화마루	LG건자재	LG하우시스	Z:IN	45000	60000	m²	2025-01
바닥	강화마루	한화건설	한화L&C	보닥	42000	55000	m²	2025-01
벽	벽지	신한벽지	신한	프리미엄	15000	22000	m²	2025-01
욕실	세면대	코리아나	코리아나	KR-100	280000	380000	개	2024-12
```

---

## 4. 데이터 준비 체크리스트

### 업로드 전 확인사항
- [ ] Excel 파일 형식 (.xlsx, .xls, .csv)
- [ ] 첫 번째 행이 헤더(컬럼명)인지 확인
- [ ] 필수 컬럼이 모두 있는지 확인
- [ ] 날짜/금액 형식이 올바른지 확인
- [ ] 한글 컬럼명 정확히 입력 (띄어쓰기 주의)

### 일반적인 오류
- ❌ 컬럼명 오타 (예: "카테고리" → "카테고리 ")
- ❌ 필수 값 누락 (카테고리, 항목명, 년도, 총액)
- ❌ 잘못된 년도 범위 (2020~2030 외)
- ❌ 잘못된 년월 형식 (유통사 데이터)
- ❌ 음수 금액

---

## 5. 업로드 프로세스

1. **파일 준비**: 위 형식에 맞춰 Excel 파일 작성
2. **관리자 페이지 접속**: `/admin/data` 경로
3. **파일 선택**: 드래그 앤 드롭 또는 클릭하여 선택
4. **업로드 타입 선택**: 시공 데이터 / 유통사 가격
5. **업로드 실행**: 자동으로 검증 및 저장
6. **결과 확인**: 성공/실패 건수 및 오류 내역 확인

---

## 6. 문제 해결

### 업로드 실패 시
1. 오류 메시지 확인
2. 해당 행 번호의 데이터 검토
3. 필수 값 누락 또는 형식 오류 수정
4. 재업로드

### 자주 묻는 질문
**Q: 같은 항목명이 여러 번 나와도 되나요?**
A: 네, 자동으로 유사한 항목을 매칭하거나 새로 생성합니다.

**Q: 카테고리를 미리 등록해야 하나요?**
A: 아니요, 자동으로 생성됩니다.

**Q: 기존 데이터가 덮어써지나요?**
A: 시공 데이터는 추가되고, 유통사 가격은 최신 데이터로 업데이트됩니다.
