# ZipCheck ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ - ì„¤ì • í˜„í™©

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- **íŒŒì¼**: `supabase-schema.sql`, `supabase/migrations/[timestamp]_initial_schema.sql`
- **í…Œì´ë¸” êµ¬ì¡°**:
  - `categories`: ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
  - `items`: í•­ëª© ê´€ë¦¬ (aliases ì§€ì›ìœ¼ë¡œ ìœ ì‚¬ í•­ëª© ìë™ ë§¤ì¹­)
  - `construction_records`: ì‹œê³µ ë°ì´í„° (2024-2025)
  - `distributor_prices`: ìœ í†µì‚¬ ê°€ê²© ë°ì´í„°
  - `market_averages`: ì‹œì¥ í‰ê·  ìë™ ê³„ì‚°
  - `upload_history`: ì—…ë¡œë“œ ì´ë ¥ ì¶”ì 

### 2. ë°±ì—”ë“œ API ì„œë²„ êµ¬ì¶•
- **ê¸°ìˆ  ìŠ¤íƒ**: Node.js + Express + TypeScript
- **ì£¼ìš” ê¸°ëŠ¥**:
  - Excel/CSV íŒŒì¼ íŒŒì‹± (`xlsx` ë¼ì´ë¸ŒëŸ¬ë¦¬)
  - ë°ì´í„° ê²€ì¦ ë° ì €ì¥
  - ì—ëŸ¬ ì¶”ì  ë° ë³´ê³ 
  - ì‹œì¥ í‰ê·  ìë™ ì¬ê³„ì‚°

- **API ì—”ë“œí¬ì¸íŠ¸**:
  ```
  POST /api/admin/upload-construction  # ì‹œê³µ ë°ì´í„° ì—…ë¡œë“œ
  POST /api/admin/upload-distributor   # ìœ í†µì‚¬ ê°€ê²© ì—…ë¡œë“œ
  POST /api/admin/recalculate-averages # ì‹œì¥ í‰ê·  ì¬ê³„ì‚°
  GET  /api/admin/upload-history       # ì—…ë¡œë“œ ì´ë ¥ ì¡°íšŒ
  POST /api/analyze-quote              # AI ê²¬ì  ë¶„ì„ (ì˜ˆì •)
  ```

### 3. Excel íŒŒì‹± ë° ê²€ì¦ ë¡œì§
- **íŒŒì¼**: `backend/src/services/excel-parser.ts`
- **ê¸°ëŠ¥**:
  - í•œê¸€ ì»¬ëŸ¼ëª… ì§€ì›
  - ê¸ˆì•¡ íŒŒì‹± (ì½¤ë§ˆ, ì›í™” ê¸°í˜¸ ì œê±°)
  - í•„ìˆ˜/ì„ íƒ í•„ë“œ ê²€ì¦
  - í–‰ë³„ ì˜¤ë¥˜ ì¶”ì 

### 4. ë°ì´í„° ì—…ë¡œë“œ ì„œë¹„ìŠ¤
- **íŒŒì¼**: `backend/src/services/data-upload.ts`
- **ê¸°ëŠ¥**:
  - ì¹´í…Œê³ ë¦¬/í•­ëª© ìë™ ìƒì„±
  - ìœ ì‚¬ í•­ëª©ëª… ìë™ ë§¤ì¹­ (ì²« 5ê¸€ì ê¸°ì¤€)
  - Aliases ìë™ ì¶”ê°€
  - í–‰ë³„ ì„±ê³µ/ì‹¤íŒ¨ ì¶”ì 
  - ì—…ë¡œë“œ ì´ë ¥ ìë™ ê¸°ë¡

### 5. ë³´ì•ˆ ì„¤ì •
- **Git ë³´ì•ˆ**:
  - `.gitignore` (ë£¨íŠ¸ + ë°±ì—”ë“œ)
  - `.env` íŒŒì¼ ë³´í˜¸
  - Supabase ì„¤ì • íŒŒì¼ ì œì™¸

- **í™˜ê²½ ë³€ìˆ˜ ë¶„ë¦¬**:
  - `.env` (ì‹¤ì œ ê°’ - Git ì œì™¸)
  - `.env.example` (í…œí”Œë¦¿ - Git í¬í•¨)

### 6. ë¬¸ì„œí™”
- `SUPABASE_SETUP.md`: Supabase ì„¤ì • ê°€ì´ë“œ
- `DATA_FORMAT_GUIDE.md`: ë°ì´í„° ì—…ë¡œë“œ í˜•ì‹ ê°€ì´ë“œ
- `SETUP_STATUS.md`: ì´ íŒŒì¼

---

## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„ (ìˆœì„œëŒ€ë¡œ ì§„í–‰)

### Step 1: Supabase í¬ë ˆë´ì…œ ì„¤ì •
1. [Supabase ëŒ€ì‹œë³´ë“œ](https://app.supabase.com) ë¡œê·¸ì¸
2. Settings > APIì—ì„œ ë‹¤ìŒ ì •ë³´ ë³µì‚¬:
   - Project URL
   - anon (public) key
   - service_role key
3. `backend/.env` íŒŒì¼ì— ê°’ ì…ë ¥

### Step 2: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

**ë°©ë²• A: Supabase ëŒ€ì‹œë³´ë“œ (ê°„í¸)**
1. SQL Editor ë©”ë‰´ ì—´ê¸°
2. `supabase-schema.sql` ë‚´ìš© ë³µì‚¬/ë¶™ì—¬ë„£ê¸°
3. Run ì‹¤í–‰

**ë°©ë²• B: CLI (ê¶Œì¥)**
```bash
# Access Token ë°œê¸‰ (Supabase ëŒ€ì‹œë³´ë“œ > Account > Access Tokens)
npx supabase login --token YOUR_TOKEN

# í”„ë¡œì íŠ¸ ì—°ê²° (Settings > Generalì—ì„œ Reference ID í™•ì¸)
npx supabase link --project-ref YOUR_PROJECT_REF

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
npx supabase db push
```

### Step 3: ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
```bash
cd backend
npm install
npm run dev
```

### Step 4: ì—°ê²° í…ŒìŠ¤íŠ¸
```bash
# í—¬ìŠ¤ ì²´í¬
curl http://localhost:3001/health

# ì˜ˆìƒ ì‘ë‹µ
{"status":"ok","message":"ZipCheck Backend is running!"}
```

### Step 5: í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²°
1. ê´€ë¦¬ì UI ì—´ê¸°: `http://localhost:5173/admin/data`
2. ë°±ì—”ë“œ API URL ì„¤ì • í™•ì¸
3. ìƒ˜í”Œ ë°ì´í„°ë¡œ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

### Step 6: ì‹¤ì œ ë°ì´í„° ì—…ë¡œë“œ
1. `DATA_FORMAT_GUIDE.md` ì°¸ê³ í•˜ì—¬ Excel íŒŒì¼ ì¤€ë¹„
2. ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ì—…ë¡œë“œ
3. Supabase Table Editorì—ì„œ ë°ì´í„° í™•ì¸

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
GOI/
â”œâ”€â”€ backend/                    # ë°±ì—”ë“œ API ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts           # Express ì„œë²„ ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â””â”€â”€ supabase.ts    # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ excel-parser.ts      # Excel íŒŒì‹±
â”‚   â”‚       â”œâ”€â”€ data-upload.ts       # ë°ì´í„° ì—…ë¡œë“œ
â”‚   â”‚       â””â”€â”€ data-management.ts   # ë°ì´í„° ê´€ë¦¬
â”‚   â”œâ”€â”€ .env                   # í™˜ê²½ ë³€ìˆ˜ (Git ì œì™¸)
â”‚   â”œâ”€â”€ .env.example          # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ openui/frontend/           # í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â””â”€â”€ src/pages/Admin/
â”‚       â””â”€â”€ DataManagement.tsx # ê´€ë¦¬ì ë°ì´í„° ì—…ë¡œë“œ UI
â”‚
â”œâ”€â”€ supabase/                  # Supabase ì„¤ì •
â”‚   â”œâ”€â”€ config.toml           # Supabase CLI ì„¤ì •
â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ [timestamp]_initial_schema.sql
â”‚
â”œâ”€â”€ .gitignore                # Git ì œì™¸ íŒŒì¼ ì„¤ì •
â”œâ”€â”€ supabase-schema.sql       # DB ìŠ¤í‚¤ë§ˆ ì›ë³¸
â”œâ”€â”€ SUPABASE_SETUP.md         # Supabase ì„¤ì • ê°€ì´ë“œ
â”œâ”€â”€ DATA_FORMAT_GUIDE.md      # ë°ì´í„° í˜•ì‹ ê°€ì´ë“œ
â””â”€â”€ SETUP_STATUS.md           # ì´ íŒŒì¼
```

---

## ğŸ”’ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `.gitignore` íŒŒì¼ ìƒì„± (ë£¨íŠ¸)
- [x] `backend/.gitignore` ìƒì„±
- [x] `.env` íŒŒì¼ì´ Gitì—ì„œ ì œì™¸ë˜ëŠ”ì§€ í™•ì¸
- [ ] Supabase í¬ë ˆë´ì…œ ì…ë ¥ í›„ ì»¤ë°‹ ì „ `git status` ì¬í™•ì¸
- [ ] GitHub í‘¸ì‹œ ì „ ë¯¼ê° ì •ë³´ í¬í•¨ ì—¬ë¶€ ìµœì¢… ì ê²€

---

## ğŸš€ ë‹¤ìŒ ê°œë°œ ë‹¨ê³„

1. **ë°ì´í„° ì‹œê°í™”**
   - ì—…ë¡œë“œëœ ë°ì´í„° í†µê³„ ëŒ€ì‹œë³´ë“œ
   - ì‹œì¥ í‰ê·  íŠ¸ë Œë“œ ì°¨íŠ¸

2. **AI ê²¬ì  ë¶„ì„ ì—”ì§„**
   - Claude API ì—°ë™
   - í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
   - ì‹¤ì‹œê°„ ê²¬ì  ë¶„ì„ ê¸°ëŠ¥

3. **ì¶”ê°€ ê¸°ëŠ¥**
   - ë°ì´í„° ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥
   - ì—‘ì…€ export
   - ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬

---

## ğŸ’¡ ì°¸ê³ ì‚¬í•­

### ë°ì´í„° ì²˜ë¦¬ ë°©ì‹
- **ì‹œê³µ ë°ì´í„°**: ê³„ì† ëˆ„ì ë¨ (historical data)
- **ìœ í†µì‚¬ ê°€ê²©**: ìµœì‹  ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸ (`is_current` í”Œë˜ê·¸)
- **ì¹´í…Œê³ ë¦¬/í•­ëª©**: ìë™ ìƒì„±, ìœ ì‚¬ í•­ëª© ìë™ ë§¤ì¹­

### ì—ëŸ¬ ì²˜ë¦¬
- í–‰ë³„ ë…ë¦½ì  ì²˜ë¦¬: í•œ í–‰ ì˜¤ë¥˜ê°€ ì „ì²´ ì—…ë¡œë“œ ì¤‘ë‹¨ì‹œí‚¤ì§€ ì•ŠìŒ
- ìƒì„¸ ì—ëŸ¬ ë¡œê·¸: í–‰ ë²ˆí˜¸ì™€ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ
- ì—…ë¡œë“œ ì´ë ¥ì— ì—ëŸ¬ ë‚´ì—­ ì €ì¥

### ì„±ê³µ ê¸°ì¤€
- âœ… ë°±ì—”ë“œ ì„œë²„ ì •ìƒ ì‹¤í–‰ (port 3001)
- âœ… Supabase ì—°ê²° ì„±ê³µ
- âœ… ìƒ˜í”Œ ë°ì´í„° ì—…ë¡œë“œ ì„±ê³µ
- âœ… Table Editorì—ì„œ ë°ì´í„° í™•ì¸ ê°€ëŠ¥
